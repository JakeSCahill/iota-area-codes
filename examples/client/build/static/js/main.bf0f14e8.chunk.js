(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,a){e.exports=a.p+"static/media/logo.7ef83fd5.svg"},166:function(e,t,a){e.exports=a(406)},283:function(e,t,a){},400:function(e,t){},403:function(e,t,a){},404:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(3),o=a(0),i=a.n(o),r=a(75),s=a.n(r),c=a(106),l=a(17),u=a.n(l),h=a(23),d=a(9),p=a(12),g=a(28),m=a(27),f=a(29),v=(a(259),a(53)),C=a(107),y=a(69),E=a(108),w=a(164),b=a.n(w),k=a(77),O=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"register",value:function(e,t){this._services[e]=t}},{key:"unregister",value:function(e){delete this._services[e]}},{key:"get",value:function(e){return!this._instances[e]&&this._services[e]&&(this._instances[e]=this._services[e]()),this._instances[e]}}]),e}();O._services={},O._instances={};var _=function(){function e(){Object(d.a)(this,e),this._configuration=void 0}return Object(p.a)(e,[{key:"load",value:function(){var e=Object(h.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(!(a=e.sent).ok){e.next=11;break}return e.next=7,a.json();case 7:return this._configuration=e.sent,e.abrupt("return",this._configuration);case 11:throw new Error("Could not find file");case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Error("Error loading configuration file\n".concat(e.t0.message));case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){return this._configuration}}]),e}(),A=function(){function e(t){Object(d.a)(this,e),this._config=void 0,this._config=t}return Object(p.a)(e,[{key:"bundle",value:function(e){e&&window.open(this._config.bundles.replace(":bundleHash",e),"_blank")}},{key:"transaction",value:function(e){e&&window.open(this._config.transactions.replace(":transactionHash",e),"_blank")}}]),e}(),I=a(49),x=a.n(I),S=a(20),L=(a(283),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e)))._configuration=void 0,a._map=void 0,a._maps=void 0,a._highlight=void 0,a._configuration=O.get("configuration").get(),a.state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(n.Heading,{level:1},"Map"),i.a.createElement("p",null,"Click on the map to display the location details, or enter a location code"),i.a.createElement(n.Form,null,i.a.createElement(n.Fieldset,null,i.a.createElement("label",null,"IOTA Area Code"),i.a.createElement("input",{type:"text",placeholder:"Please enter the iota area code",value:this.state.userIotaAreaCode,onChange:function(t){return e.setState({userIotaAreaCode:t.target.value},function(){return e.validateIotaAreaCode()})}}),i.a.createElement(n.Button,{disabled:!this.state.userIotaAreaCodeIsValid,onClick:function(){return e.iotaAreaCode()}},"Lookup")),i.a.createElement(n.Fieldset,null,i.a.createElement("label",null,"Open Location Code"),i.a.createElement("input",{type:"text",placeholder:"Please enter the open location code",value:this.state.userOpenLocationCode,onChange:function(t){return e.setState({userOpenLocationCode:t.target.value},function(){return e.validateOpenLocationCode()})}}),i.a.createElement(n.Button,{disabled:!this.state.userOpenLocationCodeIsValid,onClick:function(){return e.openLocationCode()}},"Lookup")),i.a.createElement("div",{className:"map-container"},i.a.createElement(x.a,{bootstrapURLKeys:{key:this._configuration.googleMapsKey},defaultCenter:{lat:52.529562,lng:13.413047},center:{lat:this.state.latitude||52.529562,lng:this.state.longitude||13.413047},defaultZoom:19,zoom:this.state.zoom||19,onClick:function(t){return e.mapClicked(t)},onGoogleApiLoaded:function(t){return e.apiLoaded(t.map,t.maps)},yesIWantToUseGoogleMapApiInternals:!0,onChange:function(t){return e.setState({zoom:t.zoom})}})),void 0!==this.state.latitude&&void 0!==this.state.longitude&&i.a.createElement(n.Fieldset,{small:!0},i.a.createElement("label",null,"Latitude"),i.a.createElement("span",null,this.state.latitude),i.a.createElement("label",null,"Longitude"),i.a.createElement("span",null,this.state.longitude)),void 0!==this.state.iotaAreaCode&&void 0!==this.state.openLocationCode&&i.a.createElement(n.Fieldset,{small:!0},i.a.createElement("label",null,"IOTA Area Code"),i.a.createElement("span",null,this.state.iotaAreaCode),i.a.createElement("label",null,"Open Location Code"),i.a.createElement("span",null,this.state.openLocationCode)),i.a.createElement(n.FormActions,null,i.a.createElement(n.Button,{onClick:function(){return e.reset()}},"Reset"))))}},{key:"apiLoaded",value:function(e,t){this._map=e,this._maps=t}},{key:"mapClicked",value:function(e){this.updateIac(S.encode(e.lat,e.lng))}},{key:"updateIac",value:function(e){var t=S.decode(e);this.setState({latitude:t.latitude,longitude:t.longitude,iotaAreaCode:e,openLocationCode:S.toOpenLocationCode(e),zoom:2===t.codePrecision?1:2*t.codePrecision}),this.updateHighlight(t)}},{key:"updateHighlight",value:function(e){this._highlight&&this._highlight.setMap(void 0),this._highlight=new this._maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:this._map,bounds:{south:e.latitudeLow,north:e.latitudeHigh,west:e.longitudeLow,east:e.longitudeHigh}})}},{key:"validateIotaAreaCode",value:function(){var e=!1;try{this.state.userIotaAreaCode&&(e=S.isValid(this.state.userIotaAreaCode))}catch(t){}this.setState({userIotaAreaCodeIsValid:e})}},{key:"iotaAreaCode",value:function(){this.state.userIotaAreaCode&&this.updateIac(this.state.userIotaAreaCode)}},{key:"validateOpenLocationCode",value:function(){var e=!1;try{this.state.userOpenLocationCode&&(S.fromOpenLocationCode(this.state.userOpenLocationCode),e=!0)}catch(t){}this.setState({userOpenLocationCodeIsValid:e})}},{key:"openLocationCode",value:function(){this.state.userOpenLocationCode&&this.updateIac(S.fromOpenLocationCode(this.state.userOpenLocationCode))}},{key:"reset",value:function(){this.setState({userIotaAreaCode:void 0,userIotaAreaCodeIsValid:void 0,userOpenLocationCode:void 0,userOpenLocationCodeIsValid:void 0,latitude:void 0,longitude:void 0,iotaAreaCode:void 0,openLocationCode:void 0,zoom:void 0}),this._highlight&&this._highlight.setMap(void 0)}}]),t}(o.Component)),T=a(7),j=a(22),F=a(19),M=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"encodeNonASCII",value:function(e){return e?e.replace(/[\u007F-\uFFFF]/g,function(e){return"\\u".concat("0000".concat(e.charCodeAt(0).toString(16)).substr(-4))}):void 0}},{key:"decodeNonASCII",value:function(e){return e?e.replace(/\\u([\d\w]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}):void 0}}]),e}(),B=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"toTrytes",value:function(e){var t=JSON.stringify(e),a=M.encodeNonASCII(t);return a?Object(F.asciiToTrytes)(a):""}},{key:"fromTrytes",value:function(e){var t=e.replace(/\9+$/,"");t.length%2===1&&(t+="9");var a=Object(F.trytesToAscii)(t),n=M.decodeNonASCII(a);return n?JSON.parse(n):void 0}}]),e}(),H=a(165),N=a.n(H),P=function e(t,a){var n=this;Object(d.a)(this,e),this._endpoint=void 0,this._socket=void 0,this._iacCallback=void 0,this._endpoint=t,this._socket=N()(this._endpoint),this._iacCallback=a,this._socket.on("iac",function(e){n._iacCallback(e.iac,e.trytes)})},R=a(11),D=a.n(R),G=(a(403),function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e)))._configuration=void 0,a._tangleExplorerService=void 0,a._area=void 0,a._configuration=O.get("configuration").get(),a._tangleExplorerService=O.get("tangleExplorer");var n=B.fromTrytes(a.props.transaction.signatureMessageFragment);return a._area=S.decode(a.props.iotaAreaCode),a.state={showMap:!1,message:n.message},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"iac-transaction-card"},i.a.createElement("div",{className:"iac-transaction--title"},this.state.message),i.a.createElement("div",{className:"iac-transaction--actions"},i.a.createElement(n.Button,{long:!0,onClick:function(){return e._tangleExplorerService.transaction(e.props.transaction.hash)}},this.props.transaction.hash)),i.a.createElement("div",{className:"iac-transaction--map-container"},i.a.createElement("a",{className:"iac-transaction--map-toggle icon-up-down",onClick:function(){return e.setState({showMap:!e.state.showMap})},role:"button"},this.state.showMap?"Hide Map":"Show Map","\xa0"),i.a.createElement("div",{className:D()("iac-transaction--map",{"iac-transaction--map__hidden":!this.state.showMap})},i.a.createElement(x.a,{bootstrapURLKeys:{key:this._configuration.googleMapsKey},defaultCenter:{lat:this._area.latitude,lng:this._area.longitude},defaultZoom:19,onGoogleApiLoaded:function(t){return e.apiLoaded(t.map,t.maps)},yesIWantToUseGoogleMapApiInternals:!0}))))}},{key:"apiLoaded",value:function(e,t){new t.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,bounds:{south:this._area.latitudeLow,north:this._area.latitudeHigh,west:this._area.longitudeLow,east:this._area.longitudeHigh}}).setMap(e)}}]),t}(o.Component)),U=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e)))._configuration=void 0,a._apiClient=void 0,a._tangleExplorerService=void 0,a._map=void 0,a._maps=void 0,a._highlight=void 0,a._configuration=O.get("configuration").get(),a._apiClient=new P(a._configuration.apiEndpoint,function(e,t){return a.handleTransaction(e,t)}),a._tangleExplorerService=O.get("tangleExplorer"),a.state={isBusy:!1,isErrored:!1,status:"",iotaAreaCode:"",txMessage:"",iacTransactions:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(n.Heading,{level:1},"Create IAC Transaction"),i.a.createElement("p",null,"Select an area on the map and create a transaction tagged with that location. Once the transaction is created the server should identify it in the ZMQ feed and return it to the client."),i.a.createElement(n.Form,null,i.a.createElement("div",{className:"map-container"},i.a.createElement(x.a,{bootstrapURLKeys:{key:this._configuration.googleMapsKey},defaultCenter:{lat:52.529562,lng:13.413047},defaultZoom:19,onClick:function(t){return e.mapClicked(t)},onGoogleApiLoaded:function(t){return e.apiLoaded(t.map,t.maps)},yesIWantToUseGoogleMapApiInternals:!0})),this.state.iotaAreaCode&&i.a.createElement(n.Fieldset,{small:!0},i.a.createElement("label",null,"IOTA Area Code"),i.a.createElement("span",null,this.state.iotaAreaCode)),i.a.createElement(n.Fieldset,null,i.a.createElement("label",null,"Message"),i.a.createElement("input",{type:"text",placeholder:"Please enter a message to include in the transaction",value:this.state.txMessage,onChange:function(t){return e.setState({txMessage:t.target.value})},readOnly:this.state.isBusy})),i.a.createElement(n.FormActions,null,i.a.createElement(n.Button,{disabled:this.state.isBusy||!this.state.iotaAreaCode||!this.state.txMessage,onClick:Object(h.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.createTransaction());case 1:case"end":return t.stop()}},t)}))},"Create Transaction")),i.a.createElement(n.FormStatus,{message:this.state.status,isBusy:this.state.isBusy,isError:this.state.isErrored}),this.state.transactionHash&&i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"You can view the transaction on the Tangle here, it should also appear in the Transactions list when detected by the ZMQ Server."),i.a.createElement(n.ButtonContainer,null,i.a.createElement(n.Button,{color:"secondary",long:!0,onClick:function(){return e._tangleExplorerService.transaction(e.state.transactionHash)}},this.state.transactionHash))),i.a.createElement("hr",null),i.a.createElement(n.Heading,{level:1},"Transactions (ZMQ Feed from API)"),0===this.state.iacTransactions.length&&i.a.createElement("p",null,"There are currently no IAC transactions to show."),this.state.iacTransactions.length>0&&this.state.iacTransactions.map(function(e){return i.a.createElement(G,{key:e.transaction.hash,iotaAreaCode:e.iac,transaction:e.transaction})})))}},{key:"mapClicked",value:function(){var e=Object(h.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=S.encode(t.lat,t.lng),this.setState({iotaAreaCode:a}),n=S.decode(a),this.updateHighlight(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"apiLoaded",value:function(e,t){this._map=e,this._maps=t}},{key:"createTransaction",value:function(){var e=Object(h.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isBusy:!0,isErrored:!1,status:"Creating transaction, please wait...",transactionHash:""},Object(h.a)(u.a.mark(function e(){var a,n,o,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(T.composeAPI)({provider:t._configuration.node.provider}),n=Object(T.generateAddress)(t._configuration.seed,0,2),e.next=5,a.prepareTransfers("9".repeat(81),[{address:n,value:0,message:B.toTrytes({message:t.state.txMessage}),tag:t.state.iotaAreaCode}]);case 5:return o=e.sent,e.next=8,a.sendTrytes(o,t._configuration.node.depth,t._configuration.node.mwm);case 8:i=e.sent,t.setState({isBusy:!1,status:"",isErrored:!0,transactionHash:i[0].hash}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t.setState({isBusy:!1,status:e.t0.message,isErrored:!0});case 15:case"end":return e.stop()}},e,null,[[0,12]])})));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateHighlight",value:function(e){this._highlight&&this._highlight.setMap(void 0),this._highlight=new this._maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:this._map,bounds:{south:e.latitudeLow,north:e.latitudeHigh,west:e.longitudeLow,east:e.longitudeHigh}})}},{key:"handleTransaction",value:function(e,t){this.state.iacTransactions.unshift({iac:e,transaction:Object(j.asTransactionObject)(t)}),this.setState({iacTransactions:this.state.iacTransactions.slice(0,10)})}}]),t}(o.Component),V=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(m.a)(t).call(this,e)))._configuration=void 0,a.state={isBusy:!0,status:"Loading Configuration...",statusColor:"info",isSideMenuOpen:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new _,a=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_CONFIG_ID||"local",e.next=5,t.load("/data/config.".concat(a,".json"));case 5:n=e.sent,O.register("configuration",function(){return t}),O.register("tangleExplorer",function(){return new A(n.tangleExplorer)}),this._configuration=n,this.setState({isBusy:!1,status:"",statusColor:"success"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({isBusy:!1,status:e.t0.message,statusColor:"danger"});case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(n.Header,{title:"IOTA Area Codes",topLinks:k.headerTopLinks,logo:b.a,compact:!0,hamburgerClick:function(){return e.setState({isSideMenuOpen:!e.state.isSideMenuOpen})},hamburgerMediaQuery:"tablet-up-hidden"}),i.a.createElement("nav",{className:"tablet-down-hidden"},i.a.createElement(v.a,{className:"link",to:"/"},"Conversion"),i.a.createElement(v.a,{className:"link",to:"/server"},"Server")),i.a.createElement(n.SideMenu,{isMenuOpen:this.state.isSideMenuOpen,handleClose:function(){return e.setState({isSideMenuOpen:!1})},history:this.props.history,items:[{name:"IOTA Area Codes",isExpanded:!0,items:[{items:[{name:"Conversion",link:"/"},{name:"Server",link:"/server"}]}]}],selectedItemLink:this.props.location.pathname,mediaQuery:"tablet-up-hidden"}),i.a.createElement("section",{className:"content"},i.a.createElement(n.LayoutAppSingle,null,i.a.createElement(n.StatusMessage,{status:this.state.status,color:this.state.statusColor,isBusy:this.state.isBusy}),!this.state.status&&i.a.createElement(C.a,null,i.a.createElement(y.a,{exact:!0,path:"/",component:function(){return i.a.createElement(L,{hash:Date.now()})}}),i.a.createElement(y.a,{exact:!0,path:"/server",component:function(){return i.a.createElement(U,{hash:Date.now()})}})))),i.a.createElement(n.Footer,{history:this.props.history,sections:k.footerSections,staticContent:k.footerStaticContent}),i.a.createElement(n.GoogleAnalytics,{id:this._configuration&&this._configuration.googleAnalyticsId}))}}]),t}(o.Component),W=Object(E.a)(V);a(404);s.a.render(i.a.createElement(c.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(n.RouterScrollTop,null),i.a.createElement(W,null))),document.getElementById("root"))},77:function(e){e.exports={headerTopLinks:[{href:"https://iota.org",text:"iota.org"},{href:"https://blog.iota.org/",text:"news"},{href:"https://trinity.iota.org/",text:"wallet"},{href:"https://qubic.iota.org/",text:"qubic"},{href:"https://ecosystem.iota.org/",text:"ecosystem"}],footerSections:[{heading:"IOTA Area Codes",links:[{href:"/",text:"Conversion"},{href:"/server",text:"Server"}]},{heading:"The Foundation",links:[{href:"https://www.iota.org/the-foundation/our-vision",text:"Our Vision"},{href:"https://www.iota.org/the-foundation/the-iota-foundation",text:"The IOTA Foundation"},{href:"https://www.iota.org/the-foundation/team",text:"Meet the Team"},{href:"https://www.iota.org/the-foundation/work-at-the-iota-foundation",text:"Work at the IOTA Foundation"}]},{heading:"Verticals",links:[{href:"https://www.iota.org/verticals/mobility-automotive",text:"Mobility and Automotive"},{href:"https://www.iota.org/verticals/global-trade-supply-chains",text:"Global Trade & Supply Chains"},{href:"https://www.iota.org/verticals/industrial-iot",text:"Industrial IoT"},{href:"https://www.iota.org/verticals/ehealth",text:"eHealth"},{href:"https://www.iota.org/verticals/smart-energy",text:"Smart Energy"}]},{heading:"Research",links:[{href:"https://www.iota.org/research/meet-the-tangle",text:"Meet the Tangle"},{href:"https://www.iota.org/research/academic-papers",text:"Academic Papers"},{href:"https://www.iota.org/research/roadmap",text:"Research & Development Roadmap"}]}],footerStaticContent:{address:["IOTA Foundation","c/o Nextland","Strassburgerstra\xdfe 55","10405 Berlin","Germany"],legal:["&copy; 2018 IOTA Foundation - <a href='https://www.iota.org/research/privacy-policy'>Privacy Policy</a>","Email: <a href='mailto:contact@iota.org'>contact@iota.org</a>","Board of Directors: Dominik Schiener, David S\xf8nsteb\xf8, Ralf Rottmann, Serguei Popov &amp; Sergey Ivancheglo","ID/Company No.: 3416/1234/2","EU public ID number in the EU Transparency Register: 500027331119-04"],copyright:["<a href='https://www.iota.org/research/privacy-policy'>Privacy Policy</a>","&copy; 2018 IOTA Foundation"]}}}},[[166,1,2]]]);
//# sourceMappingURL=main.bf0f14e8.chunk.js.map