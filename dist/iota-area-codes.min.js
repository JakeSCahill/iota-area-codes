!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("open-location-code-typescript")):"function"==typeof define&&define.amd?define(["exports","open-location-code-typescript"],r):r((e=e||self).IotaAreaCodes={},e.OpenLocationCode)}(this,(function(e,r){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var t=function(){function e(){}return e.NORMAL=10,e.EXTRA=11,e}(),o="FGHJKLMNOPQRSTUVXWYZA9";function i(e){for(var r="",t=0;t<e.length;t++){r+="23456789CFGHJMPQRVWX0+"[o.indexOf(e[t])]}return r}function n(e){var t=new RegExp("^["+o+"]*$").test(e);return t&&(t=r.isFull(i(e))),t}function s(e,o,i){if(void 0===i&&(i=t.NORMAL),i<2)throw new Error("The precision is not valid");return d(r.encode(e,o,i))}function c(e){var t=r.decode(a(u(e)));return{latitude:t.latitudeCenter,longitude:t.longitudeCenter,codePrecision:t.codeLength,latitudeLow:t.latitudeLo,latitudeHigh:t.latitudeHi,longitudeLow:t.longitudeLo,longitudeHigh:t.longitudeHi}}function d(e){if(!r.isValid(e))throw new Error("The openLocationCode is not valid");for(var t="",i=0;i<e.length;i++){var n="23456789CFGHJMPQRVWX0+".indexOf(e[i]);t+=o[n]}return t}function a(e){if(!n(e))throw new Error("The iotaAreaCode is not valid");return i(e)}function u(e){var r=e;return r.length<8&&(r+="A".repeat(8-r.length)),r.length<9&&(r+="9"),r}var l=[2,4,6,8,10,11];function f(e,r,t){if(l.indexOf(r)<0)throw new Error("codePrecision must be one of "+l.join(", "));if(r===t.codePrecision)return e;if(r<t.codePrecision){var o=e.replace("9","").substr(0,r);return r<=8?""+o+"A".repeat(8-r)+"9":o.substr(0,8)+"9"+o.substr(8)}return s(t.latitude,t.longitude,r)}e.CodePrecision=t,e.PRECISIONS=l,e.decode=c,e.decreasePrecision=function(e){var r=c(e);if(r.codePrecision<=l[0])throw new Error("The precision can not be decreased any more");return f(e,l[l.indexOf(r.codePrecision)-1],r)},e.encode=s,e.extract=function(e){var r="(["+o.substr(0,9)+"]["+o.substr(0,18)+"]["+o.substr(0,21)+"]{6}9(?:["+o.substr(0,20)+"]{2,3})?)",t=new RegExp(r).exec(e);return t?t[1]:void 0},e.fromOpenLocationCode=d,e.getPrecisionDimensions=function(e){var r={2:{blocksSizeDegrees:20,blocksSizeDegreesFormatted:"20°",sizeMetres:22e5,sizeMetresFormatted:"2200km"},4:{blocksSizeDegrees:1,blocksSizeDegreesFormatted:"1°",sizeMetres:11e4,sizeMetresFormatted:"110km"},6:{blocksSizeDegrees:.05,blocksSizeDegreesFormatted:"0.05°",sizeMetres:5500,sizeMetresFormatted:"110km"},8:{blocksSizeDegrees:.0025,blocksSizeDegreesFormatted:"0.0025°",sizeMetres:275,sizeMetresFormatted:"275m"},10:{blocksSizeDegrees:125e-6,blocksSizeDegreesFormatted:"0.000125°",sizeMetres:14,sizeMetresFormatted:"14m"},11:{blocksSizeDegrees:void 0,blocksSizeDegreesFormatted:void 0,sizeMetres:3.5,sizeMetresFormatted:"3.5m"}};if(!r[e])throw new Error("codePrecision must be 2, 4, 6, 8, 10 or 11");return r[e]},e.increasePrecision=function(e){var r=c(e);if(r.codePrecision>=l[l.length-1])throw new Error("The precision can not be increased any more");return f(e,l[l.indexOf(r.codePrecision)+1],r)},e.internalSetPrecision=f,e.isValid=n,e.isValidPartial=function(e){if(null==e||"string"!=typeof e||e.length>9)return!1;if(e.endsWith("AA9")){var r=e.replace(/A*9$/,"");return!(r.length<2||r.length%2==1)&&new RegExp("^["+o.substr(0,20)+"]*$").test(r)}return!1},e.padPartial=u,e.setPrecision=function(e,r){return f(e,r,c(e))},e.toOpenLocationCode=a,Object.defineProperty(e,"__esModule",{value:!0})}));
